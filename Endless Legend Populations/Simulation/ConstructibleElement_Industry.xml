<?xml version="1.0" encoding="utf-8" ?>
<Datatable xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xsi:noNamespaceSchemaLocation="../Schemas/IndustryConstructibleElement.xsd">
  <!-- Broken Lords - Reproduction -->
  <StarSystemPopulationTransformImprovementDefinition Name="StarSystemImprovementCloneLordsPopulation" SubCategory="SubCategoryPopulation" ScoreProvider="StarSystemImprovementBuilt" PopulationDestination="AffinityLords" PopulationToTransformCount="1" CreateIfNotAvailable="true" ConsumeResourceSurplus="true">
    <Tags>NoBuyout</Tags>
    <CustomCost ResourceName="SystemProduction">1</CustomCost>
    <CustomCost ResourceName="EmpireMoney">(100 + Property(Context,@'../ClassEmpire/ClassPopulation,ClassPopulationEmpireAffinityLordsCount', PopulationCount) * 100) * Property(StockLocation, @../ClassEmpire, GameSpeedMultiplier, true)</CustomCost>
    <PathPrerequisite Inverted="false" Flags="Prerequisite,Discard">ColonizedStarSystemStateColony</PathPrerequisite>
    <QueuedSimulationDescriptorReference Name="QueuedDescriptorIncreaseVirtualPopulation"/>
    <InterpreterPrerequisite Flags="Prerequisite,Discard">
      SumProperty(Context, @'../ClassColonizedStarSystem/ClassPopulationStarSystemAffinityLordsCount,ClassPopulation', PopulationCount) ge 1
    </InterpreterPrerequisite>
    <InterpreterPrerequisite Flags="MaximumPopulationSystem,Enqueue">
      (Property(Context,@ClassColonizedStarSystem, MaximumPopulation) ge (1 + Property(Context,@ClassColonizedStarSystem, Population) + Property(Context,@ClassColonizedStarSystem, VirtualPopulation)))
    </InterpreterPrerequisite>
    <InterpreterPrerequisite Flags="Prerequisite">
      (Property(Context,@ClassColonizedStarSystem, MaximumPopulation) ge (Property(Context,@ClassColonizedStarSystem, Population) + Property(Context,@ClassColonizedStarSystem, VirtualPopulation)))
    </InterpreterPrerequisite>
    <SimulationDescriptorReference Name="StarSystemImprovementCloneLordsPopulation"/>
  </StarSystemPopulationTransformImprovementDefinition>

  <PlanetTerraformationDefinition Name="PlanetTerraformationFromSwampToLava" SubCategory="PlanetTerraformationDust">
    <AIGain RessourceName="FoodGain"/>
    <AIGain RessourceName="IndustryGain"/>

    <SupervisorGain Name="Food"     Weight="-3"/>
    <SupervisorGain Name="Industry" Weight="14"/>
    <SupervisorGain Name="Science"  Weight="-2"/>
    <SupervisorGain Name="Dust"     Weight="-6"/>
    <SupervisorGain Name="Approval" Weight="0"/>

    <CustomCost ResourceName="SystemProduction">2000 * Property(StockLocation, @../ClassEmpire, TerraformationModifier)</CustomCost>

    <PathPrerequisite Flags="Prerequisite,Discard,CheckOnPlanet">PlanetTypeSwamp,UniquePlanetChabota</PathPrerequisite>

    <SimulationDescriptorReference Name="PlanetTypeLava"/>
    <SimulationDescriptorReference Name="PlanetGameplayTypeHot"/>
    <SimulationDescriptorReference Name="PlanetGameplayTypeMeager"/>

    <RemovedType>PlanetType</RemovedType>
    <RemovedType>PlanetGameplayType</RemovedType>
  </PlanetTerraformationDefinition>
</Datatable>